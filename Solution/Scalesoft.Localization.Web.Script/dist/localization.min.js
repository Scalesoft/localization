var Localization=function(){function t(){this.mGlobalScope="global",this.mCultureCookieName="Localization.Culture",this.mDictionary={},this.mPluralizedDictionary={}}return t.prototype.translate=function(t,n,r){var i=this.getDictionary(n,r).translate(t);return null==i?this.getFallbackTranslation(t,n,r):i},t.prototype.translateFormat=function(t,n,r,i){var e=this.getDictionary(r,i).translateFormat(t,n);return null==e?this.getFallbackTranslation(t,r,i):e},t.prototype.translatePluralization=function(n,t,r,i){var e=this.getPluralizationDictionary(r,i);try{var o=e.translatePluralization(n,t);return null==o?this.getFallbackTranslation(n,r,i):o}catch(t){return this.handleError(t,n)}},t.prototype.getFallbackTranslation=function(t,n,r){return console.log("Localized string with key="+t+" was not found in dictionary="+n+" with culture="+r),{name:t,value:"X{undefined}",resourceNotFound:!0}},t.prototype.handleError=function(t,n){return console.error(t.message),{name:n,value:"X{error}",resourceNotFound:!0}},t.prototype.configureSiteUrl=function(t){this.mSiteUrl=t},t.prototype.getDictionary=function(t,n){return t=this.checkScope(t),n=this.checkCultureName(n),this.getLocalizationDictionary(t,n)},t.prototype.getPluralizationDictionary=function(t,n){return t=this.checkScope(t),n=this.checkCultureName(n),this.getPluralizationLocalizationDictionary(t,n)},t.prototype.checkCultureName=function(t){return t||this.getCurrentCulture()},t.prototype.checkScope=function(t){return t||this.mGlobalScope},t.prototype.getLocalizationDictionary=function(t,n){var r=this.dictionaryKey(t,n),i=this.mDictionary[r];return void 0===i?(this.downloadDictionary(t,n),this.mDictionary[r]):i},t.prototype.getPluralizationLocalizationDictionary=function(t,n){var r=this.dictionaryKey(t,n),i=this.mPluralizedDictionary[r];return void 0===i?(this.downloadPluralizedDictionary(t,n),this.mPluralizedDictionary[r]):i},t.prototype.dictionaryKey=function(t,n){return t.concat("|",n)},t.prototype.downloadDictionary=function(r,i){var e=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&200===o.status){var t=o.responseText,n=e.dictionaryKey(r,i);e.mDictionary[n]=new LocalizationDictionary(t)}};var t=this.mSiteUrl;t&&"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),o.open("GET",t+"/Localization/Dictionary?scope="+r,!1),o.send()},t.prototype.downloadPluralizedDictionary=function(r,i){var e=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&200===o.status){var t=o.responseText,n=e.dictionaryKey(r,i);e.mPluralizedDictionary[n]=new LocalizationPluralizationDictionary(t)}};var t=this.mSiteUrl;t&&"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),o.open("GET",t+"/Localization/PluralizedDictionary?scope="+r,!1),o.send()},t.prototype.getCurrentCulture=function(){if(void 0===this.mCurrentCulture){var t=this.getCurrentCultureCookie();this.setCurrentCulture(t)}return this.mCurrentCulture},t.prototype.setCurrentCulture=function(t){this.mCurrentCulture=t},t.prototype.getCurrentCultureCookie=function(){return LocalizationUtils.getCookie(this.mCultureCookieName)},t}(),LocalizationDictionary=function(){function t(t){this.mDictionary=JSON.parse(t)}return t.prototype.translate=function(t){var n=this.mDictionary[t];return void 0===n?null:n},t.prototype.translateFormat=function(t,n){var r=this.translate(t);return{name:t,value:n?this.formatString(r,n):r.value,resourceNotFound:r.resourceNotFound}},t.prototype.formatString=function(t,e){return t.value.replace(/\{\s*([^}\s]+)\s*\}/g,function(t,n,r,i){return e[n]})},t}(),LocalizationPluralizationDictionary=function(){function t(t){this.mDictionary=JSON.parse(t)}return t.prototype.translatePluralization=function(t,n){var r=this.mDictionary[t];if(null==r)return null;for(var i=new PluralizationInterval(n,n),e=0,o=r.intervals;e<o.length;e++){var a=o[e],u=a.interval;if(LocalizationUtils.isInInterval(i,u))return a.localizedString}return r.defaultLocalizedString},t}(),PluralizationInterval=function(t,n){if(n<t)throw new Error("The start value should be less or equal than end.");this.start=t,this.end=n},LocalizationUtils=function(){function t(){}return t.getCookie=function(n){return n+="=",document.cookie.split(";").map(function(t){return t.trim()}).filter(function(t){return 0===t.indexOf(n)}).map(function(t){return decodeURIComponent(t.substring(n.length))})[0]||null},t.isOverlaping=function(t,n){if(!t)throw new Error("Interval is not defined");return n.start<=t.start&&t.end<=n.end},t.isInInterval=function(t,n){return!!t&&(typeof n==typeof t&&this.isOverlaping(t,n))},t}();