var Localization=function(){function t(){this.mGlobalScope="global",this.mCultureCookieName="Localization.Culture",this.mDictionary={},this.mPluralizedDictionary={}}return t.prototype.translate=function(t,r,i){var n=this.getDictionary(r,i).translate(t);return null==n?this.getFallbackTranslation(t,r,i):n},t.prototype.translateFormat=function(t,r,i,n){var o=this.getDictionary(i,n).translateFormat(t,r);return null==o?this.getFallbackTranslation(t,i,n):o},t.prototype.translatePluralization=function(r,t,i,n){var o=this.getPluralizationDictionary(i,n);try{var e=o.translatePluralization(r,t);return null==e?this.getFallbackTranslation(r,i,n):e}catch(t){return this.handleError(t,r)}},t.prototype.getFallbackTranslation=function(t,r,i){return console.log("Localized string with key="+t+" was not found in dictionary="+r+" with culture="+i),{name:t,value:"X{undefined}",resourceNotFound:!0}},t.prototype.handleError=function(t,r){return console.error(t.message),{name:r,value:"X{error}",resourceNotFound:!0}},t.prototype.configureSiteUrl=function(t){this.mSiteUrl=t},t.prototype.getDictionary=function(t,r){return t=this.checkScope(t),r=this.checkCultureName(r),this.getLocalizationDictionary(t,r)},t.prototype.getPluralizationDictionary=function(t,r){return t=this.checkScope(t),r=this.checkCultureName(r),this.getPluralizationLocalizationDictionary(t,r)},t.prototype.checkCultureName=function(t){return t||this.getCurrentCulture()},t.prototype.checkScope=function(t){return t||this.mGlobalScope},t.prototype.getLocalizationDictionary=function(t,r){var i=this.dictionaryKey(t,r),n=this.mDictionary[i];return void 0===n?(this.downloadDictionary(t,r),this.mDictionary[i]):n},t.prototype.getPluralizationLocalizationDictionary=function(t,r){var i=this.dictionaryKey(t,r),n=this.mPluralizedDictionary[i];return void 0===n?(this.downloadPluralizedDictionary(t,r),this.mPluralizedDictionary[i]):n},t.prototype.dictionaryKey=function(t,r){return t.concat("|",r)},t.prototype.downloadDictionary=function(i,n){var o=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var t=e.responseText,r=o.dictionaryKey(i,n);o.mDictionary[r]=new LocalizationDictionary(t)}};var t=this.mSiteUrl;t&&"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),e.open("GET",t+"/Localization/Dictionary?scope="+i,!1),e.send()},t.prototype.downloadPluralizedDictionary=function(i,n){var o=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var t=e.responseText,r=o.dictionaryKey(i,n);o.mPluralizedDictionary[r]=new LocalizationPluralizationDictionary(t)}};var t=this.mSiteUrl;t&&"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),e.open("GET",t+"/Localization/PluralizedDictionary?scope="+i,!1),e.send()},t.prototype.getCurrentCulture=function(){if(""===this.mCurrentCulture){var t=this.getCurrentCultureCookie();this.setCurrentCulture(t)}return this.mCurrentCulture},t.prototype.setCurrentCulture=function(t){this.mCurrentCulture=t},t.prototype.getCurrentCultureCookie=function(){return LocalizationUtils.getCookie(this.mCultureCookieName)},t}(),LocalizationDictionary=function(){function t(t){this.mDictionary=JSON.parse(t)}return t.prototype.translate=function(t){var r=this.mDictionary[t];return void 0===r?null:r},t.prototype.translateFormat=function(t,r){var i=this.translate(t);return{name:t,value:r?this.formatString(i,r):i.value,resourceNotFound:i.resourceNotFound}},t.prototype.translatePluralization=function(t,r){var i=this.mDictionary[t];return void 0===i?null:i},t.prototype.formatString=function(t,o){return t.value.replace(/\{\s*([^}\s]+)\s*\}/g,function(t,r,i,n){return o[r]})},t}(),LocalizationPluralizationDictionary=function(){function t(t){this.mDictionary=JSON.parse(t)}return t.prototype.translatePluralization=function(t,r){var i=this.mDictionary[t];if(null==i)return null;var n=new PluralizationInterval(r,r);for(var o in i.pluralized)if(i.pluralized.hasOwnProperty(o)){var e=o.split(","),a=parseInt(e[0],10),u=parseInt(e[1],10);if(isNaN(a)||isNaN(u))continue;if(new PluralizationInterval(a,u).equals(n))return i.pluralized[o]}return i.defaultLocalizedString},t}(),PluralizationInterval=function(){function t(t,r){if(r<t){throw new Error("The x value should be less or equal than y.")}this.x=t,this.y=r}return t.prototype.isOverlaping=function(t){if(!t)throw new Error("Interval is not defined");return this.x<=t.y&&t.x<=this.y},t.prototype.equals=function(t){return null!=t&&(typeof this==typeof t&&this.isOverlaping(t))},t}(),LocalizationUtils=function(){function t(){}return t.getCookie=function(r){return r+="=",document.cookie.split(";").map(function(t){return t.trim()}).filter(function(t){return 0===t.indexOf(r)}).map(function(t){return decodeURIComponent(t.substring(r.length))})[0]||null},t}();